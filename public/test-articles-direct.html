<!DOCTYPE html>
<html>
<head>
    <title>Test Articles Direct</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>üì∞ Articles - Test Direct</h1>
        
        <?php
        require '../vendor/autoload.php';
        
        $app = require '../bootstrap/app.php';
        $app->make(Illuminate\Contracts\Console\Kernel::class)->bootstrap();
        
        try {
            $articles = \App\Models\Article::all();
            echo "<div class='alert alert-info'>Nombre d'articles en base: " . $articles->count() . "</div>";
            
            if ($articles->count() > 0) {
                echo "<div class='row'>";
                foreach ($articles as $article) {
                    echo "<div class='col-md-4 mb-3'>";
                    echo "<div class='card'>";
                    echo "<div class='card-body'>";
                    echo "<h5 class='card-title'>" . htmlspecialchars($article->titre) . "</h5>";
                    echo "<p class='card-text'>" . htmlspecialchars(substr($article->contenu, 0, 100)) . "...</p>";
                    echo "<span class='badge bg-" . ($article->is_published ? 'success' : 'warning') . "'>";
                    echo $article->is_published ? 'Publi√©' : 'Brouillon';
                    echo "</span>";
                    if ($article->category) {
                        echo " <span class='badge bg-info'>" . htmlspecialchars($article->category->nom) . "</span>";
                    }
                    echo "</div>";
                    echo "</div>";
                    echo "</div>";
                }
                echo "</div>";
            } else {
                echo "<div class='alert alert-warning'>";
                echo "Aucun article trouv√©. <a href='/create-test-data' class='btn btn-primary btn-sm'>Cr√©er des donn√©es de test</a>";
                echo "</div>";
            }
            
        } catch (Exception $e) {
            echo "<div class='alert alert-danger'>Erreur: " . htmlspecialchars($e->getMessage()) . "</div>";
        }
        ?>
        
        <div class="mt-4">
            <a href="/articles" class="btn btn-primary">Aller aux articles (Laravel)</a>
            <a href="/admin/dashboard" class="btn btn-success">Dashboard Admin</a>
            <a href="/create-test-data" class="btn btn-warning">Cr√©er donn√©es de test</a>
        </div>
    </div>
</body>
</html>
